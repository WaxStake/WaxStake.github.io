<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="language" content="en">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="js/wax.bloks.io.js"></script>
  <link rel="stylesheet" href="releases/v5.6.3/css/all.css"
    integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <link href="css?family=Oswald:400,300,700" rel='stylesheet' type='text/css'>
  <script src='js/waxjs.js'></script>
  <script src="js/tasktimer.min.js"></script>
  <script src="jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="css%20%281%29/bootstrap.min.css">
  <link rel="stylesheet" href="css%20%281%29/style.css">
  <script async="" src="gtag/js?id=G-E0V6Z4BH6P"></script>

</head>


<body>
  <div class="container">
    <h1 class="text-center text">Welcome to WaxCpuLoanCenter
      <br> 24-hours CPU loan service for the WAX Blockchain By <a class='text-info' href='index.htm'>WAXCPU.NET</a></h1>
    <div class="row mt-5">
      <div class="col-md-12 m-auto">
        <div class="card card-body">
          <h1 class="text-center">Agent name : <a class="text-info" href="https://www.facebook.com/perapol.chimpaibol/">
              <i class="fab fa-facebook-messenger"></i> perapon </a> </h1>
          <h2 class="text-center text-danger">Please check wax before buy </h2>
          <input id="rate" value="100" hidden="">
          <input id="blinput" hidden="">
          <h2 class="text-center text-danger">Rate 1 : 100 </h2>
          <h2 class="text-center text-success"><strong id="freebal"></strong></h2>
          <h3>WAX Login : <span id="userlogin" class="text-success"></span></h3>
          <button class="btn btn-outline-danger col-3" onclick="login()">Login</button>
          <hr>
          <h5 class="text-center text-danger"><strong> Min. : 50 Wax | 3 Day</strong></h5>
          <h2 class="text-center text-success"><strong>Agent Online Auto-Staked !</strong></h2>
          <div class="col-10 m-auto">
            <div class="card card-body">
              <div class="col-12">
                <div class="text-center"> Manual Buy Wax >> Pay : <strong id="ratepay" class="text-danger">-</strong>
                  WAX</div>
              </div>
              <div class="row">
                <div class="col-3 m-auto">
                  Wax
                  <input class="form-control calculate" id="amount" value="50">
                </div>
                <div class="col-3 m-auto">
                  Day
                  <input class="form-control calculate" id="dayloan" value="3">
                </div>
                <button class="butbuy btn btn-outline-info col-6" style="text-transform: uppercase;">
                  Buy now <br><span id="waxinput">-</span> WAX </button>
              </div>
            </div>
            <br>
            <div class="card card-body">
              <div class="col-12">
                <div class="text-center">50 WAX staked for <span id="day50" class="dayall text-danger">3</span> day
                </div>
              </div>
              <div class="col-12">
                <button class="butbuy btn btn-outline-success col-12" style="text-transform: uppercase;">
                  Buy now <br><strong class="text-danger" id="wax50" class="text-danger">0.5</strong> WAX </button>
              </div>
            </div>
            <br>
            <div class="card card-body">
              <div class="col-12">
                <div class="text-center">100 WAX staked for <span id="dayall" class="dayall text-danger">3</span> day
                </div>
              </div>
              <div class="col-12">
                <button class="butbuy btn btn-outline-primary col-12" style="text-transform: uppercase;">
                  Buy now <br><strong class="text-danger" id="wax100">1</strong> WAX </button>
              </div>
            </div>
            <br>
            <div class="card card-body">
              <div class="col-12">
                <div class="text-center">200 WAX staked for <span id="day200" class="dayall text-danger">3</span> day
                </div>
              </div>
              <div class="col-12">
                <button class="butbuy btn btn-outline-success col-12" style="text-transform: uppercase;">
                  Buy now <br><strong class="text-danger" id="wax200">2</strong> WAX </button>
              </div>
            </div>
            <br>
            <div class="card card-body">
              <div class="col-12">
                <div class="text-center">500 WAX staked for <span id="day500" class="dayall text-danger">3</span> day
                </div>
              </div>
              <div class="col-12">
                <button class="butbuy btn btn-outline-primary col-12" style="text-transform: uppercase;">
                  Buy now <br><strong class="text-danger" id="wax500">5</strong> WAX </button>
              </div>
            </div>
            <div class="card card-body">
              <div class="col-12">
                <div class="text-center">1000 WAX staked for <span id="day1000" class="dayall text-danger">3</span> day
                </div>
              </div>
              <div class="col-12">
                <button class="butbuy btn btn-outline-success col-12" style="text-transform: uppercase;">
                  Buy now <br><strong class="text-danger" id="wax1000">10</strong> WAX </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <script>
      $(document).ready(function () {
        let rate = $("#rate").val()
        let day = $("#dayloan").val()
        let amount = $("#amount").val()
        let pay = (amount / rate) * day
        $("#ratepay").text(pay)
        $("#waxinput").text(pay)
        cal()
      })

      $(".butbuy").click(function () {
        let minday = '3'
        let minwax = '50'
        let amount = $(this).children().text()
        // console.log($(this).children().text())
        let rate = $("#rate").val()
        let day = $("#dayloan").val()
        let pay = (amount / rate) * day
        if (parseInt($("#blinput").val()) < minwax) {
          Swal.fire({
            position: 'center',
            icon: 'error',
            title: 'Error Agent No Balance !.',
            text: `No balance please contact agent.`,
            showConfirmButton: true,
            // timer: 1500
          })
          return;
        }
        if ($("#userlogin").text().trim() == '') {
          alert('Please login')
          return;
        } else {
          console.log($("#dayloan").val());
          console.log($("#amount").val());
          console.log("MD:" + minday);
          console.log("MD:" + minwax);

          if (amount == '' || amount == '-') {
            alert("Please input wax and day !")
            return;
          }
          if (parseFloat($("#dayloan").val()) >= parseFloat(minday) && parseFloat($("#amount").val()) >= parseFloat(
              minwax)) {
            let day = parseInt($("#dayloan").val())
            // console.log(`Am : ${amount} > ${day} day`)
            buy(amount, day)
          } else {
            // alert(`Minimum : ${minwax} & ${day}`)
            Swal.fire({
              position: 'center',
              icon: 'error',
              title: 'Error Minimum !.',
              text: `MinWax : ${minwax} & MinDay :${minday}`,
              showConfirmButton: true,
              // timer: 1500
            })

          }
        }

      });

      function cal() {
        let rate = $("#rate").val()
        let day = $("#dayloan").val()
        let amount = $("#amount").val()
        let pay = (amount / rate) * day
        // console.log(`Rate : ${rate} | Am : ${amount} |  Day : ${day} | Pay : ${pay}`)
        $("#ratepay").text(pay)
        $("#waxinput").text(pay)

        if (isNaN(day) || day == '') {
          $("#wax50").text((50 / rate) * 1)
          $("#wax100").text((100 / rate) * 1)
          $("#wax200").text((200 / rate) * 1)
          $("#wax500").text((500 / rate) * 1)
          $("#wax1000").text((1000 / rate) * 1)

          $(".dayall").text(minday)
          $(".dayall").text(minday)
          $(".dayall").text(minday)
          $(".dayall").text(minday)
          $(".dayall").text(minday)
        } else {

          $("#wax50").text((50 / rate) * day)
          $("#wax100").text((100 / rate) * day)
          $("#wax200").text((200 / rate) * day)
          $("#wax500").text((500 / rate) * day)
          $("#wax1000").text((1000 / rate) * day)

          $(".dayall").text(day)
          $(".dayall").text(day)
          $(".dayall").text(day)
          $(".dayall").text(day)
          $(".dayall").text(day)
        }

      }
      $(".calculate").keyup(function () {
        let rate = $("#rate").val()
        let day = $("#dayloan").val()
        let amount = $("#amount").val()
        let pay = (amount / rate) * day
        // console.log(`Rate : ${rate} | Am : ${amount} |  Day : ${day} | Pay : ${pay}`)
        $("#ratepay").text(pay)
        $("#waxinput").text(pay)

        if (isNaN(day) || day == '') {
          $("#wax50").text((50 / rate) * 1)
          $("#wax100").text((100 / rate) * 1)
          $("#wax200").text((200 / rate) * 1)
          $("#wax500").text((500 / rate) * 1)
          $("#wax1000").text((1000 / rate) * 1)

          $(".dayall").text(minday)
          $(".dayall").text(minday)
          $(".dayall").text(minday)
          $(".dayall").text(minday)
          $(".dayall").text(minday)
        } else {

          $("#wax50").text((50 / rate) * day)
          $("#wax100").text((100 / rate) * day)
          $("#wax200").text((200 / rate) * day)
          $("#wax500").text((500 / rate) * day)
          $("#wax1000").text((1000 / rate) * day)

          $(".dayall").text(day)
          $(".dayall").text(day)
          $(".dayall").text(day)
          $(".dayall").text(day)
          $(".dayall").text(day)
        }


      });

      GetFreeSpace("y5a2o.c.wam")

      async function GetFreeSpace(acc) {
        var path = "https://wax.greymass.com/v1/chain/get_table_rows";
        var data = JSON.stringify({
          json: true,
          code: "eosio.token",
          scope: acc,
          table: "accounts",
          lower_bound: "WAX",
          upper_bound: "WAX",
          limit: 1
        });
        const response = await fetch(path, {
          headers: {
            "Content-Type": "text/plain"
          },
          body: data,
          method: "POST"
        });
        const body = await response.json();
        $("#freebal").text(`AVAILABLE : ${body.rows[0].balance}`)
        $("#blinput").val(body.rows[0].balance.split(".")[0])
        // alert($("#blinput").val())
        // return { ac: acc, av : body.rows[0].balance}

      }


      const wax = new waxjs.WaxJS({
        rpcEndpoint: 'https://wax.greymass.com'
      });
      async function login() {
        try {
          //if autologged in, this simply returns the userAccount w/no popup
          let userAccount = await wax.login();
          let pubKeys = wax.pubKeys;
          $("#userlogin").text(userAccount);
        } catch (e) {
          $("#userlogin").text(e.message);

        }
      }

      async function buy(amount, day) {
        // alert(amount)


        amount = parseFloat(amount).toFixed(8)
        const config = {
          actions: [{
            account: 'eosio.token',
            name: 'transfer',
            authorization: [{
              actor: wax.userAccount,
              permission: 'active',
            }],
            data: {
              from: wax.userAccount,
              to: 'y5a2o.c.wam',
              quantity: amount + ' WAX',
              memo: day,
            },
          }]
        }

        let ret = await sign(config);
        if (ret.status == true) {
          let result = ret.data;
          // alert("Success waiting staking for you 1-5 minutes.")
          Swal.fire({
            position: 'center',
            icon: 'success',
            title: 'Success waiting staking for you 1-5 minutes.',
            text: "Txid : " + ret.data.transaction_id,
            showConfirmButton: true,
            // timer: 1500
          })

          return {
            status: true,
            data: result
          };
        } else {
          Swal.fire({
            position: 'center',
            icon: 'error',
            title: 'Error please try again !.',
            text: ret.data,
            showConfirmButton: true,
            // timer: 1500
          })


        }

      }

      async function sign(config) {
        if (!wax.api) {
          return document.getElementById('response').append('* Login first *');
        }

        try {
          const result = await wax.api.transact(config, {
            blocksBehind: 3,
            expireSeconds: 1200,
          });
          await new Promise(resolve => setTimeout(resolve, 1000));
          return {
            status: true,
            data: result
          };

        } catch (e) {
          // const node = document.createElement("li");
          // const textnode = document.createTextNode(e.message);
          // node.appendChild(textnode);
          // document.getElementById("response").appendChild(node);
          return {
            status: false,
            data: e
          };

        }
      }
    </script>
  </div>
  <script src="jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous">
  </script>
  <script src="ajax/libs/popper.js/1.14.6/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous">
  </script>
  <script src="bootstrap/4.2.1/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous">
  </script>
  <script src="npm/axios/dist/axios.min.js"></script>
  <script src="jquery-3.6.0.min.js"></script>
  <script src="fontawesome/v6.0.0/js/all.js" data-auto-replace-svg="nest"></script>
  <script src="npm/sweetalert2%4011"></script>
</body>

</html>
<script>

</script>